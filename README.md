TinyJson 库对 JSON 字符串的解析实现思路和细节主要体现在以下几个方面：

### 1. 整体流程控制

- **逐字符解析**：TinyJson 库通过逐个读取字符来解析 JSON 字符串，这样可以精细控制解析过程，并能够及时响应格式错误。
- **状态机模型**：解析器内部使用状态机模型来处理不同的 JSON 结构，如对象、数组、字符串值、数值等。
- **递归解析**：对于嵌套的 JSON 对象和数组，解析器采用递归的方式进行解析，这样可以处理任意深度的嵌套结构。

### 2. 字符处理

- **编码转换**：由于 JSON 标准使用 UTF-8 编码，而 C++ 标准库中的字符串处理函数通常是基于单字节字符，因此 TinyJson 库需要将 UTF-8 编码的字符串转换为 UTF-32 编码，以便正确处理 Unicode 字符。
- **空白字符跳过**：在解析过程中，需要跳过空白字符（如空格、制表符、换行符等），以提高解析的灵活性和健壮性。
- **转义序列处理**：JSON 字符串中可能包含转义序列（如 `\"`、`\\`、`\n` 等），解析器需要识别这些序列并转换为对应的字符。

### 3. 数据结构构建

- **动态类型识别**：解析器根据读取的字符动态识别 JSON 值的类型，并构建相应的数据结构，如使用 `std::map` 构建对象，使用 `std::vector` 构建数组。
- **键值对处理**：在解析对象时，解析器需要识别键名，并将其与相应的值关联起来，这涉及到字符串的比较和映射。
- **类型安全**：在添加值到 JSON 对象或数组时，解析器会检查类型匹配，以确保数据的一致性和正确性。

### 4. 错误处理

- **异常抛出**：当遇到格式错误、类型不匹配或其他解析问题时，解析器会抛出异常，提供错误信息，使得调用者可以捕获并处理这些错误。
- **错误定位**：为了便于调试，解析器在抛出异常时会提供尽可能详细的错误位置信息，如行号、列号或具体的字符位置。

### 5. 性能考虑

- **流式处理**：TinyJson 库采用流式处理方式，这意味着它可以处理任意大小的 JSON 数据，而不需要一次性将整个 JSON 字符串加载到内存中。
- **内存管理**：解析过程中涉及到动态内存分配和释放，TinyJson 库通过智能的内存管理策略来避免内存泄漏，并尽量减少内存碎片。
